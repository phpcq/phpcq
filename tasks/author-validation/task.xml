<project name="phpcq.task.author-validation">
    <property file="${phpcq.basedir}/tasks/author-validation/default.properties"/>
    <target name="-check-author-validation.installed" unless="author-validation.installed">
        <available property="author-validation.installed" file="${phpcq.bin.author-validation}"/>
    </target>
    <target name="author-validation" depends="-check-author-validation.installed" if="${author-validation.installed}">
        <exec executable="${php.binary}" outputproperty="author-validation.arguments">
            <arg line="-r"/>
            <arg value="
            echo ('true' === '${author-validation.php-files}' ? ' --php-files' : '');
            echo ('true' === '${author-validation.composer}' ? ' --composer' : '');
            echo ('true' === '${author-validation.bower}' ? ' --bower' : '');
            echo ('true' === '${author-validation.packages}' ? ' --packages' : '');
            "/>
        </exec>
        <exec dir="${basedir}" executable="${php.binary}" failonerror="true" taskname="author-validation">
            <arg value="${phpcq.bin.author-validation}"/>
            <arg line="${author-validation.arguments}"/>
            <arg value="${basedir}"/>
        </exec>
    </target>
</project>
